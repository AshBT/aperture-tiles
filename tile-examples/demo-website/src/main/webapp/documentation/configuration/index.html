<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Documentation | Aperture Tiles</title>
    <link rel="stylesheet" type="text/css" href="../../css/all.css">
    <link rel="stylesheet" type="text/css" href="../../jstests/test.css">
    <link rel="stylesheet" href="../../prettify/default.css">
    <link rel="SHORTCUT ICON" href="../../img/aperture-16x16.ico"/>
    <script src="../../lib/jquery.js"></script>
    <script src="../../lib/ga.js"></script>
    <script type="text/javascript" src="../../css/js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
	<script type="text/javascript" src="../../css/js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>
	<link href="../../css/js/syntaxhighlighter_3.0.83/styles/shCore.css" rel="stylesheet" type="text/css" />
	<link href="../../css/js/syntaxhighlighter_3.0.83/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="header"></div>
<div id="content-strip">
    <div id="header-logo">
        <a href="../../"><img src="../../img/aperture-tiles-big.png"></a>
    </div>
    <div id="header-menu">
        <a href="../../" class="overview">&nbsp;</a>
        <a href="../../tour/overview/">Tour</a>
        <a href="../../documentation/setup/" class="selected">Documentation</a>
        <a href="../../demos/">Demos</a>
        <a href="https://github.com/oculusinfo/aperture-tiles" target="_blank">Download</a>

			<span id="testlinks">
				<a href="../../examples/tests.html">Tests</a>
			</span>
    </div>

    <div id="all">
    	<div id="submenu">
            <div class="submenu-item" onclick="window.location.assign('../setup/');">
                <div class="submenu-item-background">
                    <div class="submenu-item-number">1</div>
                </div>
                <div class="submenu-item-label">Installation</div>
            </div>
            <div class="submenu-item" onclick="window.location.assign('../generation/');">
                <div class="submenu-item-background">
                    <div class="submenu-item-number">2</div>
                </div>
                <div class="submenu-item-label">Generation</div>
            </div>
            <div class="submenu-item" onclick="window.location.assign('');">
                <div class="submenu-item-background selected">
                    <div class="submenu-item-number">3</div>
                </div>
                <div class="submenu-item-label">Configure</div>
            </div>
            <div class="submenu-item" onclick="window.location.assign('../rendering/');">
                <div class="submenu-item-background ">
                    <div class="submenu-item-number">4</div>
                </div>
                <div class="submenu-item-label">Rendering</div>
            </div>
        </div>

        <div id="content">
            <div class="content-context">
                    <ul class="toc right"><li>
                        <a href="#template-setup">Template Setup</a>
                        <li> <a href="#server-config">Server Configuration</a></li>
                        <ul><li><a href="#webxml">web.xml</a></li></ul>
                        <ul><li><a href="#tileproperties">tile.properties</a></li></ul>
                        <li><a href="#clientconfig">Client Configuration</a>
                            <ul><li><a href="#layer">Layer</a></li></ul>
                            <ul><li><a href="#type">Type</a></li></ul>
                            <ul><li><a href="#transform">Transform</a></li></ul>
                            <ul><li><a href="#ramp">Ramp</a></li>
                                <ul><li><a href="#linear">Linear</a></li></ul>
                                <ul><li><a href="#grad">Single Gradient</a></li></ul>
                                <ul><li><a href="#def">Default</a></li></ul></ul>
                            <ul><li><a href="#opacity">Opacity</a></li></ul>
                            <ul><li><a href="#renderer">Renderer</a></li></ul>
                            <ul><li><a href="#multiple">Multiple Layers</a></li></ul>
                    </li></ul>
            </div>

            <div class="content-body">
                <h1>Configuration</h1>
                <a name="template-setup"></a>
                <h2>Template Setup</h2>
                <p> To begin setting up Aperture Tiles copy the directory <i>aperture-tiles/tile-client-template</i> and paste it into <i>aperture-tiles/tile-examples</i>.

                <p> For Aperture Tiles and Maven to recognize the new project the relevant POM files must be updated.

                <p> First, the new project's name must be formalized. Navigate to <i>new-project-name/</i> and open <b>POM.xml</b>. Edit the <artifactId> tag content located on line 4 from "tile-client-template" to "new-project-name" and edit the <name> tag content located on line 6 from "Aperture-Tiles Web Client Template" to "new-project-name".

                <p> Next, the parent directory's POM must be updated to recognize the new project. Navigate to <i>aperture-tiles/tile-examples</i> and open <b>POM.xml</b>. Navigate to line 20 and add in the line: <pre class="code">&ltmodule&gtnew-project-name&lt/module&gt</pre> Now Aperture Tiles will recognize the new project.



                <a name="server-config"></a>
                <h2>Server Configuration</h2>

                <p>Now that the new template is copied the tile server must become pointed to the desired tiles. If tiles have not yet been generated, refer to the tile generation documentation.

                <p>To configure the tile-server two files need to be updated.
                    <a name="webxml"></a>
                <h3>Web.xml</h3><p>Navigate to <i>new-project-name\src\main\webapp\WEB-INF</i> and open the file <b>web.xml</b>. Lines 17-30 in this file are used to tell Aperture Tiles which storage module is being used to hold the tiles. Uncomment the relevant lines based on how the tiles are stored and ensure that all other lines from 17-30 are commented out. Aperture Tiles currently supports tiles stored as File System Based, Jar files, Zip files, and in HBase or a SQLite database.
                    <a name="tileproperties"></a>
                <h3>Tile.properties</h3><p>Next, navigate to <i>new-project-name\src\main\resources</i> and open the file <b>tile.properties</b>. This file is responsible for pointing the server to the exact location of the tiles. Lines 10-70 provide detailed instructions regarding how to configure each storage module. Uncomment the relevant lines so that the location information matches the module type chosen in web.xml and set the required location parameters appropriately. <p>It is important to note that the information in tile.properties should point to the location of the tiles, not to the actual tile set. For example if the full address of the tiles are: <i>main/datasets/mytiles.avro</i> then tile.properties should point to <i>main/datasets/</i>. The tile client configurations in the next section will point to the specific tiles.

                <p>Before exiting tile.properties ensure that all other lines between lines 10-70 are commented out.
                <a name="clientconfig"></a>
                <h2>Client Configuration</h2>

                <p>Now that the template is copied and the server is pointed to the tiles it is time to configure the tile client to properly display the tiles.

                <p>To configure how exactly your layer is displayed navigate to <i>new-project-name/src/main/webapp/data</i> and open <b>layers.json</b>. This file will contain 6 editable fields to customize how the tiles are shown. The options are: layer, type, transform, ramp, opacity, renderer. A detailed description of each parameter is found below.
                    <a name="layer"></a>
                <h3>Layer</h3> The layer field is used to point to specific tiles which are displayed on the map. For example if tiles are stored in <i>main/datasets/mytiles.avro</i> the layers field should be set to "mytiles.avro". If a database is being used then layer should be set to the desired tile set in your database.
                <a name="type"></a>
                <h3>Type</h3> Currently "tile" is the only option supported. Direct image pyramids and client rendered will be supported in a future release.
                <a name="transform"></a>
                <h3>Transform</h3> The transform option allows the user to apply transformations to the data values when determining color. Currently the options are "linear" which does not perform a transformation, and "log10" which will take logarithms of raw values.
                <a name="ramp"></a>
                <h3>Ramp</h3> The ramp option is used to determine what color scale is applied to the data points. Currently the ramp supports 3 options: linear, single-gradient, and default color scales.
                <a name="linear"></a>
                <h4>Linear Ramp</h4>The linear option shows all of the data points with a constant color and can be configured by setting:
                <pre class="code">"ramp": {
    "name": "flat",
    "color": "green"
},</pre>
                <a name="grad"></a>
                <h4>Single Gradient Ramp</h4><p>The single-gradient option will draw the color of each data point as a gradient between two colors. The value where the gradient begins and ends can be manually altered by setting the from-alpha and to-alpha fields. The from-alpha and to-alpha can each take any value between 0-255.

                <p>A sample implementation is shown below:

                <pre class="code">"ramp": {
    "name": "single-gradient",
    "from": 0xffffff,
    "from-alpha": 0,
    "to": 0x00ff00,
    "to-alpha": 100
},</pre>
                <a name="def"></a>
                <h4>Default Color Scales</h4><p>The default color scales will edit the color of each data point based on its concentration using a predefined color scale. The current options are:
                <ul>
                    <li>'br': A blue-green ramp.</li>
                    <li>'inv-br': Inverted blue-green ramp.</li>
                    <li>'ware': A red-yellow-green ramp.</li>
                    <li>'inv-ware': Inverted red-yellow-green ramp.</li>
                    <li>'grey': Full greyscale ramp.</li>
                    <li>'inv-grey': Inverse greyscale ramp.</li>
                    </ul>

                These options can be set directly by:

                <pre class="code">ramp": "ware",</pre>
                <a name="opacity"></a>
                <h3>Opacity</h3> This setting is used to edit the starting opacity of the later. This can be set to any decimal value ranging from 0 (totally transparent) to 1 (totally opaque).
                <a name="renderer"></a>
                <h3>Renderer</h3>  This option defines which renderer the server should use to render and read tiles. The current renderer options are:

                <ul>
                    <li>'default': Renders to a heat-map, based on a standard avro double-valued tile</li>
                    <li>'doubleseries': Renders to a series of heat-maps, based on a standard avro double-series-valued tile</li>
                    <li>'doublestatistics': Renders tile's total hit and % coverage as text to the tile</li>
                    <li>'textscore': Renders to an image showing the scored words, with bars based on their score</li>
</ul>
                <a name="multiple"></a>
                <h3>Multiple Layers</h3><p>Maps with multiple layers can be created by copying multiple layer description objects and pasting them below the current layer configurations and separating each layer with a comma. An example is shown below.
                <pre class="code">[
    {
    "layer": "my-layer1",
    "type": "tile",
    "transform": "linear",
    "ramp": "ware",
    "opacity": 0.85,
    "renderer": "toptextscores"
    },
    {
    "layer": "my-layer2",
    "type": "tile",
    "transform": "linear",
    "ramp": "ware",
    "opacity": 0.85,
    "renderer": "toptextscores"
    }
]</pre>


            </div>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">
    SyntaxHighlighter.all()
</script>

</html>
